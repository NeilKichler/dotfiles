#!/usr/bin/env bash
readonly TERMINAL=st

if ! pgrep nvim; then
   rm "$XDG_DATA_HOME"/nvim/swap/*
   exec $TERMINAL -e /usr/bin/nvim "$1"
else

python - <<END
from neovim import attach
nvim = attach('socket', path='/tmp/nvimsocket')
nvim.command('e $1')
END

fi
