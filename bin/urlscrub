#!/usr/bin/env bash
# Cheapo url spawner for st

readonly optsfile=$XDG_CONFIG_HOME/dmenu/bemenucolors

# https://github.com/mvdan/xurls
# https://github.com/Cloudef/bemenu
# Currently strips newlines as well

menu() {
    xurls | tac | bemenu -l 10 "${opts[@]}" -p URLs
}

handle() {
  local selection
  while read -r selection; do
    plumber "$selection" 
  done
}

[[ -s $optsfile ]] && source "$optsfile"

menu "$@" |handle 
