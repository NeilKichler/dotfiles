#!/usr/bin/env bash
# Unite implementation for Neovim using bemenu
# Requires bemenu, neovim, and python

readonly optsfile=$XDG_CONFIG_HOME/dmenu/bemenucolors

get_selection() {
  opts+=(-l 10 -p "Select file")
  find ~/ -type f | bemenu "${opts[@]}"
}

## Main ##

[[ -s $optsfile ]] && source "$optsfile"

if [[ $1 ]]; then
  result="$(pwd)/$1"
else
  result="$(get_selection)"
fi

if [[ $result ]]; then
    exec plumber "$result"
fi
