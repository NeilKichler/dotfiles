#!/usr/bin/env bash

# Go through files
WINDIR=${WINDIR:-/tmp/groups}
# Number of groups
panels=6


run_loop() {
  while read _; do
    cd $WINDIR 
    local -a items
    local result
    for (( i = 1; i <= $panels; i++ )); do
      if grep "$i" active >/dev/null; then
        item[$i]="●"
      elif grep "$i" inactive >/dev/null; then
       item[$i]="◉"
      else
        item[$i]="○"
      fi
      result+=${item["$i"]}
    done
    printf '%s\n' "$result"
  done
}
wendy -m 2 -f /tmp/groups/ -e echo "run" | "$(run_loop)"
