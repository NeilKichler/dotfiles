#!/usr/bin/env bash

case "$1" in
    *youtube.com/watch*)      mpv-run "$1"                     ;;
    *.pdf|*.djvu|*.epub)      curl -s "$1" > /tmp/tmp.book 
                              zathura /tmp/tmp.book            ;;
    *youtu.be*)               mpv-run "$1"                     ;;
    *twitch*)                 mpv-run "$1"                     ;;
    *.mkv|*.mp4|*.webm|*.mpg) mpv-run "$1"                     ;;
    *.jpg|*.png)              curl -s "$1" > /tmp/tmp.png
                              imv /tmp/tmp.png                 ;; 
    *.gif)        curl -s "$1" > /tmp/tmp.gif
                              imv /tmp/tmp.gif                 ;;
    *imgur*)                  curl -s http://i.imgur.com/"${1: -7}".png > /tmp/tmp.png
                              imv /tmp/tmp.png                 ;;
    http*)                    vimb-run "$1"                    ;;
    *)  
      if grep "$1" <<< $(apropos .); then
        exec "$XDG_DATA_HOME"/dsearch/manualhandler "$1" 
      else
        vimb-run "!g $1"
      fi                                                       ;;
esac
