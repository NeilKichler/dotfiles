#!/bin/sh
# Requires https://github.com/wmutils


# directory of files that correlate to window names
readonly windows="$XDG_CONFIG_HOME"/wmutils/windows
winsize() {
  local name
  while read -r id; do
    name=$(wname "$id" | awk '{print $NF}')
    if [ -s $windows/$name ]; then
      . "$windows/$name"
    else
      . "$windows"/default
    fi
  done
}

## Main ##
# sizes
. "$XDG_CONFIG_HOME"/wmutils/size
[ ! $width ] && [ ! $heigh ] && exit 1

lsw | winsize | ~/local/cfg/wmutils/binpack -x "$width" -y "$heigh" -g "$gaps" | while read -r x y w h wid; do
  wtp "$x" "$y" "$w" "$h" "$wid"
done
